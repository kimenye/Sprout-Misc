/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
alter table account drop constraint FKB9D38A2D2E106D04
alter table account drop constraint FKB9D38A2D2D88E9BE
alter table exchange_rate drop constraint FK5258D57CFA8AC268
alter table exchange_rate drop constraint FK5258D57C2D88E9BE
alter table interest_rate drop constraint FK8BCC48D517131248
alter table plan drop constraint FK348B293656CF06
alter table plan drop constraint FK348B292E106D04
alter table plan drop constraint FK348B292D88E9BE
alter table profile drop constraint FKED8E89A95C4F362C
alter table sec_user drop constraint FK375DF2F938F710C8
alter table sec_user_sec_role drop constraint FK6630E2A207A678B
alter table sec_user_sec_role drop constraint FK6630E2A7B4FA3AB
alter table transaction drop constraint FK7FA0D2DEC1570E8C
alter table transaction drop constraint FK7FA0D2DEAD7C182C
alter table transaction drop constraint FK7FA0D2DE97D10A4B
alter table transaction drop constraint FK7FA0D2DE17131248
drop table account if exists
drop table currency if exists
drop table exchange_rate if exists
drop table interest_rate if exists
drop table plan if exists
drop table profile if exists
drop table registration_code if exists
drop table sec_role if exists
drop table sec_user if exists
drop table sec_user_sec_role if exists
drop table transaction if exists
create table account (id bigint generated by default as identity (start with 1), version bigint not null, account_name varchar(255) not null, account_type varchar(7) not null, base_currency_id bigint not null, cash_credit_limit numeric, credit_limit numeric, in_active bit, interest_free_period_days numeric, opening_balance numeric, owner_id bigint not null, primary key (id), unique (account_name))
create table currency (id bigint generated by default as identity (start with 1), version bigint not null, currency_name varchar(255) not null, currency_symbol varchar(255) not null, in_active bit, primary key (id))
create table exchange_rate (id bigint generated by default as identity (start with 1), version bigint not null, base_currency_id bigint not null, from_date timestamp, in_active bit, name varchar(255) not null, rate numeric not null, to_currency_id bigint not null, to_date timestamp, primary key (id))
create table interest_rate (id bigint generated by default as identity (start with 1), version bigint not null, account_id bigint not null, annual_rate numeric not null, daily_rate numeric not null, from_date timestamp not null, in_active bit not null, interest_rate_type varchar(12) not null, to_date timestamp not null, primary key (id))
create table plan (id bigint generated by default as identity (start with 1), version bigint not null, base_currency_id bigint not null, date_created timestamp not null, default_account_id bigint not null, in_active bit, last_updated timestamp not null, owner_id bigint not null, plan_end_date timestamp not null, plan_name varchar(255) not null, plan_start_date timestamp not null, plan_type varchar(14) not null, primary key (id))
create table profile (id bigint generated by default as identity (start with 1), version bigint not null, currency_id bigint not null, email varchar(255) not null, preferred_name varchar(255) not null, primary key (id))
create table registration_code (id bigint generated by default as identity (start with 1), date_created timestamp not null, token varchar(255) not null, username varchar(255) not null, primary key (id))
create table sec_role (id bigint generated by default as identity (start with 1), version bigint not null, authority varchar(255) not null, primary key (id), unique (authority))
create table sec_user (id bigint generated by default as identity (start with 1), version bigint not null, account_expired bit not null, account_locked bit not null, enabled bit not null, "password" varchar(255) not null, password_expired bit not null, username varchar(255) not null, class varchar(255) not null, profile_id bigint, primary key (id), unique (profile_id), unique (username))
create table sec_user_sec_role (sec_role_id bigint not null, sec_user_id bigint not null, primary key (sec_role_id, sec_user_id))
create table transaction (id bigint generated by default as identity (start with 1), version bigint not null, account_id bigint not null, amount numeric not null, in_active bit, plan_id bigint not null, recurrence_end_date timestamp, recurrence_type varchar(7) not null, to_account_id bigint, transaction_currency_id bigint not null, transaction_date timestamp not null, transaction_name varchar(255) not null, transaction_type varchar(8) not null, primary key (id))
alter table account add constraint FKB9D38A2D2E106D04 foreign key (owner_id) references sec_user
alter table account add constraint FKB9D38A2D2D88E9BE foreign key (base_currency_id) references currency
alter table exchange_rate add constraint FK5258D57CFA8AC268 foreign key (to_currency_id) references currency
alter table exchange_rate add constraint FK5258D57C2D88E9BE foreign key (base_currency_id) references currency
alter table interest_rate add constraint FK8BCC48D517131248 foreign key (account_id) references account
alter table plan add constraint FK348B293656CF06 foreign key (default_account_id) references account
alter table plan add constraint FK348B292E106D04 foreign key (owner_id) references sec_user
alter table plan add constraint FK348B292D88E9BE foreign key (base_currency_id) references currency
alter table profile add constraint FKED8E89A95C4F362C foreign key (currency_id) references currency
alter table sec_user add constraint FK375DF2F938F710C8 foreign key (profile_id) references profile
alter table sec_user_sec_role add constraint FK6630E2A207A678B foreign key (sec_user_id) references sec_user
alter table sec_user_sec_role add constraint FK6630E2A7B4FA3AB foreign key (sec_role_id) references sec_role
alter table transaction add constraint FK7FA0D2DEC1570E8C foreign key (to_account_id) references account
alter table transaction add constraint FK7FA0D2DEAD7C182C foreign key (plan_id) references plan
alter table transaction add constraint FK7FA0D2DE97D10A4B foreign key (transaction_currency_id) references currency
alter table transaction add constraint FK7FA0D2DE17131248 foreign key (account_id) references account
INSERT INTO CURRENCY VALUES(1,0,'Australian Dollar','AUD',NULL)
INSERT INTO CURRENCY VALUES(2,0,'Kenyan Shilling','KES',NULL)
INSERT INTO EXCHANGE_RATE VALUES(1,0,1,NULL,NULL,'AUD to KES',95.22,2,NULL)
INSERT INTO EXCHANGE_RATE VALUES(2,0,2,NULL,NULL,'KES to AUD',0.0103,1,NULL)
INSERT INTO SEC_ROLE VALUES(1,0,'ROLE_USER')
INSERT INTO SEC_ROLE VALUES(2,0,'ROLE_ADMIN')
INSERT INTO PROFILE VALUES(1,0,2,'testuser@gmail.com','Test User')
INSERT INTO SEC_USER VALUES(1,0,FALSE,FALSE,TRUE,'5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8',FALSE,'test','com.kimenye.budget.User',1)
INSERT INTO SEC_USER_SEC_ROLE VALUES(1,1)
INSERT INTO PROFILE VALUES(2,0,1,'adminuser@gmail.com','Admin User')
INSERT INTO SEC_USER VALUES(2,0,FALSE,FALSE,TRUE,'5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8',FALSE,'admin','com.kimenye.budget.User',2)
INSERT INTO SEC_USER_SEC_ROLE VALUES(2,2)
INSERT INTO ACCOUNT VALUES(1,0,'ANZ','Savings',1,0,0,NULL,NULL,30000,1)
INSERT INTO ACCOUNT VALUES(2,0,'CBA','Credit',1,12500,12500,NULL,NULL,5000,1)
INSERT INTO ACCOUNT VALUES(3,0,'Online Saver','Savings',1,NULL,NULL,NULL,NULL,0,1)
INSERT INTO PLAN VALUES(1,0,1,'2011-07-29 10:45:10.198000000',1,NULL,'2011-07-29 10:45:10.198000000',1,'2012-01-11 00:00:00.000000000','Test Plan','2011-01-11 00:00:00.000000000','Budget')
INSERT INTO TRANSACTION VALUES(1,0,2,500,NULL,1,NULL,'None',NULL,1,'2011-02-11 00:00:00.000000000','Buying iPad','Expense')
INSERT INTO TRANSACTION VALUES(2,0,1,250,NULL,1,NULL,'None',2,1,'2011-03-11 00:00:00.000000000','iPad Part 1','Transfer')
INSERT INTO TRANSACTION VALUES(3,0,1,500,NULL,1,NULL,'Monthly',3,1,'2011-02-01 00:00:00.000000000','Transfer to Savings','Transfer')
INSERT INTO REGISTRATION_CODE VALUES(1,'2011-07-29 10:46:14.216000000','96df99093d224ae5a1d958d76cdf64b2','test')
INSERT INTO PROFILE VALUES(3,0,1,'kimenye@gmail.com','Trevor Kimenye')
INSERT INTO SEC_USER VALUES(3,0,FALSE,TRUE,TRUE,'a075d17f3d453073853f813838c15b8023b8c487038436354fe599c3942e1f95',FALSE,'kimenye','com.kimenye.budget.User',3)
INSERT INTO REGISTRATION_CODE VALUES(2,'2011-07-29 10:46:47.265000000','91e701b66cf24946b7706d3d824af7af','kimenye')
SET AUTOCOMMIT FALSE
INSERT INTO SEC_USER_SEC_ROLE VALUES(1,3)
DELETE FROM SEC_USER WHERE ID=3
INSERT INTO SEC_USER VALUES(3,1,FALSE,FALSE,TRUE,'a075d17f3d453073853f813838c15b8023b8c487038436354fe599c3942e1f95',FALSE,'kimenye','com.kimenye.budget.User',3)
DELETE FROM REGISTRATION_CODE WHERE ID=2
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
INSERT INTO REGISTRATION_CODE VALUES(3,'2011-07-29 10:48:02.113000000','c71856c039a94a28b5d666e1f49a7bc3','kimenye')
SET AUTOCOMMIT FALSE
DELETE FROM SEC_USER WHERE ID=3
INSERT INTO SEC_USER VALUES(3,2,FALSE,FALSE,TRUE,'a7db472ddc0d9ae4fa93377294d3d62376191717525a9cb315b02c4daa4ab59a',FALSE,'kimenye','com.kimenye.budget.User',3)
DELETE FROM REGISTRATION_CODE WHERE ID=3
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
